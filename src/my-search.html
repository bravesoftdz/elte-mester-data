<html><head></head><body><div hidden="" by-polymer-bundler=""><script>window.UdeS=window.UdeS||{},UdeS.LogicalOperatorsMixin=function(a){return function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:"and",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(c,a){return c&&a},!0)}},{key:"iif",value:function(a,b,c){return a?b:c}},{key:"not",value:function(a){return!a}},{key:"or",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];return b.reduce(function(c,a){return c||a},!1)}},{key:"xor",value:function(){for(var a=arguments.length,b=Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=b.reduce(function(c,a){return c+a},0);return 1===d%2}}]),b}(a)};</script><dom-module id="paper-item-body" assetpath="../bower_components/paper-item/"><template><style>:host{overflow:hidden;@apply --layout-vertical;@apply --layout-center-justified;@apply --layout-flex;}:host([two-line]){min-height:var(--paper-item-body-two-line-min-height, 72px);}:host([three-line]){min-height:var(--paper-item-body-three-line-min-height, 88px);}:host > ::slotted(*){overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}:host > ::slotted([secondary]){@apply --paper-font-body1;color:var(--paper-item-body-secondary-color, var(--secondary-text-color));@apply --paper-item-body-secondary;}</style><slot></slot></template><script>Polymer({is:'paper-item-body'});</script></dom-module><script>!function(a,b){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"object"==("undefined"===typeof module?"undefined":babelHelpers.typeof(module))?module.exports=b():"function"==typeof define&&define.amd?define("Fuse",[],b):"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))?exports.Fuse=b():a.Fuse=b()}(this,function(){var f=Math.min;return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=8)}([function(a){"use strict";a.exports=function(a){return"[object Array]"===Object.prototype.toString.call(a)}},function(b,d,e){"use strict";function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=e(5),i=e(7),m=e(4),a=function(){function b(e,n){var q=n.location,o=void 0===q?0:q,r=n.distance,a=void 0===r?100:r,s=n.threshold,h=void 0===s?.6:s,t=n.maxPatternLength,u=void 0===t?32:t,v=n.isCaseSensitive,d=n.tokenSeparator,p=void 0===d?/ +/g:d,w=n.findAllMatches,y=n.minMatchCharLength,k=void 0===y?1:y;j(this,b),this.options={location:o,distance:a,threshold:h,maxPatternLength:u,isCaseSensitive:void 0!==v&&v,tokenSeparator:p,findAllMatches:void 0!==w&&w,minMatchCharLength:k},this.pattern=this.options.isCaseSensitive?e:e.toLowerCase(),this.pattern.length<=u&&(this.patternAlphabet=m(this.pattern))}return f(b,[{key:"search",value:function(a){if(this.options.isCaseSensitive||(a=a.toLowerCase()),this.pattern===a)return{isMatch:!0,score:0,matchedIndices:[[0,a.length-1]]};var b=this.options,d=b.maxPatternLength,e=b.tokenSeparator;if(this.pattern.length>d)return g(a,this.pattern,e);var f=this.options,j=f.location,k=f.distance,m=f.threshold,n=f.findAllMatches,o=f.minMatchCharLength;return i(a,this.pattern,this.patternAlphabet,{location:j,distance:k,threshold:m,findAllMatches:n,minMatchCharLength:o})}}]),b}();b.exports=a},function(a,b,c){"use strict";var d=c(0),f=function b(e,f,g){if(f){var j=f.indexOf("."),i=f,a=null;-1!==j&&(i=f.slice(0,j),a=f.slice(j+1));var k=e[i];if(null!==k&&void 0!==k)if(!(a||"string"!=typeof k&&"number"!=typeof k))g.push(k.toString());else if(d(k))for(var m=0,h=k.length;m<h;m+=1)b(k[m],a,g);else a&&b(k,a,g)}else g.push(e);return g};a.exports=function(a,b){return f(a,b,[])}},function(a){"use strict";a.exports=function(){for(var b,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,e=[],f=-1,g=-1,h=0,i=c.length;h<i;h+=1)b=c[h],b&&-1===f?f=h:b||-1===f||(g=h-1,g-f+1>=d&&e.push([f,g]),f=-1);return c[h-1]&&h-f>=d&&e.push([f,h-1]),e}},function(a){"use strict";a.exports=function(a){for(var b={},c=a.length,d=0;d<c;d+=1)b[a.charAt(d)]=0;for(var e=0;e<c;e+=1)b[a.charAt(e)]|=1<<c-e-1;return b}},function(a){"use strict";a.exports=function(b,d){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:/ +/g,f=new RegExp(d.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(e,"|")),g=b.match(f),j=!!g,k=[];if(j)for(var l,h=0,m=g.length;h<m;h+=1)l=g[h],k.push([b.indexOf(l),l.length-1]);return{score:j?.5:1,isMatch:j,matchedIndices:k}}},function(a){"use strict";a.exports=function(b,d){var e=d.errors,f=void 0===e?0:e,g=d.currentLocation,j=void 0===g?0:g,i=d.expectedLocation,a=void 0===i?0:i,k=d.distance,c=void 0===k?100:k,h=f/b.length,l=Math.abs(a-j);return c?h+l/c:l?1:h}},function(a,b,c){"use strict";var i=c(6),n=c(3);a.exports=function(o,e,q,r){for(var t=Math.max,A=r.location,a=void 0===A?0:A,s=r.distance,c=void 0===s?100:s,B=r.threshold,l=void 0===B?.6:B,u=r.findAllMatches,D=void 0!==u&&u,d=r.minMatchCharLength,v=void 0===d?1:d,p=a,G=o.length,y=l,m=o.indexOf(e,p),H=e.length,x=[],J=0;J<G;J+=1)x[J]=0;if(-1!==m){var M=i(e,{errors:0,currentLocation:m,expectedLocation:p,distance:c});if(y=f(M,y),-1!==(m=o.lastIndexOf(e,p+H))){var b=i(e,{errors:0,currentLocation:m,expectedLocation:p,distance:c});y=f(b,y)}}m=-1;for(var N=[],L=1,w=H+G,C=0;C<H;C+=1){for(var Q=0,O=w;Q<O;)i(e,{errors:C,currentLocation:p+O,expectedLocation:p,distance:c})<=y?Q=O:w=O,O=Math.floor((w-Q)/2+Q);w=O;var F=t(1,p-O+1),P=D?G:f(p+O,G)+H,j=Array(P+2);j[P+1]=(1<<C)-1;for(var z=P;z>=F;z-=1){var R=z-1,S=q[o.charAt(R)];if(S&&(x[R]=1),j[z]=(1|j[z+1]<<1)&S,0!==C&&(j[z]|=1|(N[z+1]|N[z])<<1|N[z+1]),j[z]&1<<H-1&&(L=i(e,{errors:C,currentLocation:R,expectedLocation:p,distance:c}))<=y){if(y=L,(m=R)<=p)break;F=t(1,2*p-m)}}if(i(e,{errors:C+1,currentLocation:p,expectedLocation:p,distance:c})>y)break;N=j}return{isMatch:0<=m,score:0===L?.001:L,matchedIndices:n(x,v)}}},function(b,d,e){"use strict";function m(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var g=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=e(1),n=e(2),p=e(0),a=function(){function a(e,q){var r=q.location,o=void 0===r?0:r,t=q.distance,s=void 0===t?100:t,v=q.threshold,h=void 0===v?.6:v,w=q.maxPatternLength,u=void 0===w?32:w,z=q.caseSensitive,d=q.tokenSeparator,p=void 0===d?/ +/g:d,B=q.findAllMatches,y=q.minMatchCharLength,k=void 0===y?1:y,D=q.id,E=void 0===D?null:D,G=q.keys,b=void 0===G?[]:G,H=q.shouldSort,L=q.getFn,C=void 0===L?n:L,N=q.sortFn,I=void 0===N?function(a,b){return a.score-b.score}:N,P=q.tokenize,F=q.matchAllTokens,j=q.includeMatches,Q=q.includeScore,K=q.verbose;m(this,a),this.options={location:o,distance:s,threshold:h,maxPatternLength:u,isCaseSensitive:void 0!==z&&z,tokenSeparator:p,findAllMatches:void 0!==B&&B,minMatchCharLength:k,id:E,keys:b,includeMatches:void 0!==j&&j,includeScore:void 0!==Q&&Q,shouldSort:void 0===H||H,getFn:C,sortFn:I,verbose:void 0!==K&&K,tokenize:void 0!==P&&P,matchAllTokens:void 0!==F&&F},this.setCollection(e)}return g(a,[{key:"setCollection",value:function(a){return this.list=a,a}},{key:"search",value:function(b){this._log("---------\nSearch pattern: \""+b+"\"");var c=this._prepareSearchers(b),d=c.tokenSearchers,e=c.fullSearcher,f=this._search(d,e),g=f.weights,h=f.results;return this._computeScore(g,h),this.options.shouldSort&&this._sort(h),this._format(h)}},{key:"_prepareSearchers",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",b=[];if(this.options.tokenize)for(var c=a.split(this.options.tokenSeparator),d=0,e=c.length;d<e;d+=1)b.push(new h(c[d],this.options));return{tokenSearchers:b,fullSearcher:new h(a,this.options)}}},{key:"_search",value:function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],g=arguments[1],j=this.list,k={},m=[];if("string"==typeof j[0]){for(var p=0,q=j.length;p<q;p+=1)this._analyze({key:"",value:j[p],record:p,index:p},{resultMap:k,results:m,tokenSearchers:b,fullSearcher:g});return{weights:null,results:m}}for(var a={},r=0,v=j.length;r<v;r+=1)for(var h,w=j[r],x=0,u=this.options.keys.length;x<u;x+=1){if(h=this.options.keys[x],"string"!=typeof h){if(a[h.name]={weight:1-h.weight||1},0>=h.weight||1<h.weight)throw new Error("Key weight has to be > 0 and <= 1");h=h.name}else a[h]={weight:1};this._analyze({key:h,value:this.options.getFn(w,h),record:w,index:r},{resultMap:k,results:m,tokenSearchers:b,fullSearcher:g})}return{weights:a,results:m}}},{key:"_analyze",value:function(q,e){var s=q.key,t=q.arrayIndex,n=void 0===t?-1:t,B=q.value,D=q.record,G=q.index,H=e.tokenSearchers,h=void 0===H?[]:H,J=e.fullSearcher,u=void 0===J?[]:J,K=e.resultMap,d=void 0===K?{}:K,N=e.results,Q=void 0===N?[]:N;if(void 0!==B&&null!==B){var R=!1,y=-1,m=0;if("string"==typeof B){this._log("\nKey: "+(""===s?"-":s));var k=u.search(B);if(this._log("Full text: \""+B+"\", score: "+k.score),this.options.tokenize){for(var x,U=B.split(this.options.tokenSeparator),S=[],M=0;M<h.length;M+=1){x=h[M],this._log("\nPattern: \""+x.pattern+"\"");for(var b=!1,L=0;L<U.length;L+=1){var w=U[L],C=x.search(w),A={};C.isMatch?(A[w]=C.score,R=!0,b=!0,S.push(C.score)):(A[w]=1,this.options.matchAllTokens||S.push(1)),this._log("Token: \""+w+"\", score: "+A[w])}b&&(m+=1)}y=S[0];for(var I=S.length,O=1;O<I;O+=1)y+=S[O];y/=I,this._log("Token score average:",y)}var F=k.score;-1<y&&(F=(F+y)/2),this._log("Score average:",F);var V=!this.options.tokenize||!this.options.matchAllTokens||m>=h.length;if(this._log("\nCheck Matches: "+V),(R||k.isMatch)&&V){var j=d[G];j?j.output.push({key:s,arrayIndex:n,value:B,score:F,matchedIndices:k.matchedIndices}):(d[G]={item:D,output:[{key:s,arrayIndex:n,value:B,score:F,matchedIndices:k.matchedIndices}]},Q.push(d[G]))}}else if(p(B))for(var z=0,W=B.length;z<W;z+=1)this._analyze({key:s,arrayIndex:z,value:B[z],record:D,index:G},{resultMap:d,results:Q,tokenSearchers:h,fullSearcher:u})}}},{key:"_computeScore",value:function(b,d){this._log("\n\nComputing score:\n");for(var e=0,g=d.length;e<g;e+=1){for(var j=d[e].output,k=j.length,i=0,a=1,m=0;m<k;m+=1){var c=b?b[j[m].key].weight:1,h=1===c?j[m].score:j[m].score||.001,l=h*c;1===c?(j[m].nScore=l,i+=l):a=f(a,l)}d[e].score=1===a?i/k:a,this._log(d[e])}}},{key:"_sort",value:function(a){this._log("\n\nSorting...."),a.sort(this.options.sortFn)}},{key:"_format",value:function(b){var d=[];this._log("\n\nOutput:\n\n",JSON.stringify(b));var e=[];this.options.includeMatches&&e.push(function(b,c){var d=b.output;c.matches=[];for(var e,f=0,g=d.length;f<g;f+=1)if(e=d[f],0!==e.matchedIndices.length){var h={indices:e.matchedIndices,value:e.value};e.key&&(h.key=e.key),e.hasOwnProperty("arrayIndex")&&-1<e.arrayIndex&&(h.arrayIndex=e.arrayIndex),c.matches.push(h)}}),this.options.includeScore&&e.push(function(a,b){b.score=a.score});for(var f,g=0,h=b.length;g<h;g+=1)if(f=b[g],this.options.id&&(f.item=this.options.getFn(f.item,this.options.id)[0]),e.length){for(var i={item:f.item},a=0,j=e.length;a<j;a+=1)e[a](f,i);d.push(i)}else d.push(f.item);return d}},{key:"_log",value:function(){if(this.options.verbose){var a;(a=console).log.apply(a,arguments)}}}]),a}();b.exports=a}])});</script></div><dom-module id="my-search"><template><style include="shared-styles">:host{display:block;padding:10px 20px;}#results{--paper-item-secondary:{font-size:x-small;line-height:1.4em;white-space:pre-wrap;};}</style><h1>Keresés</h1><div class="card"><paper-dropdown-menu id="place" label="Keresés itt" on-selected-item-changed="_searchCategoryChanged" selected-item="{{categoryItem}}"><paper-listbox slot="dropdown-content"><paper-item data="[[_fetchAllTemaDescription]]">Témák leírása</paper-item><paper-item data="[[_fetchAllFeladatDescription]]">Feladatok szövege</paper-item><paper-item data="[[_fetchAllMintafeladatDescription]]">Kidolgozott mintafeladatok</paper-item></paper-listbox></paper-dropdown-menu><template is="dom-if" if="[[and(categoryValid, _loadNotRequestedYet)]]"><paper-button on-click="_requestLoad"><iron-icon icon="file-download"></iron-icon>Leírások betöltése</paper-button></template><paper-spinner active="[[loading]]"></paper-spinner><template is="dom-if" if="[[and(_loadNotRequestedYet, categoryItem.data.estimate)]]"><p>Várható adatforgalom: <span>[[categoryItem.data.estimate]]</span></p></template></div><template is="dom-if" if="[[loaded]]"><div class="card"><paper-input label="Keresés..." type="search" value="{{searchQuery}}" on-keydown="_searchKeyDown"></paper-input><template is="dom-if" if="[[searchQuery]]"><template is="dom-if" if="[[resultsIncomplete]]"><p class="info"><iron-icon icon="info-outline"></iron-icon>Nyomjon entert a teljes kereséshez</p></template><paper-listbox id="results"><template is="dom-repeat" items="[[_results]]"><a class="paper-item-link" href$="[[item.item.url]]" tabindex="-1" target="_blank"><paper-item><paper-item-body two-line=""><div>[[item.item.name]]</div><div secondary="" inner-h-t-m-l="[[_formattedDesc(item)]]"></div></paper-item-body></paper-item></a></template></paper-listbox></template></div></template></template><script>var MySearch=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_searchCategoryChanged',value:function(a){var b=this;if(this._promiseStatus&&(this._promiseStatus.obsolete=!0),this.setProperties({categoryValid:!1,loadRequested:!1,loaded:!1,failed:!1,data:[],fastSearchDone:!1,fullSearchDone:!1,searchInitiated:!1},!0),a.detail.value&&a.detail.value.data){this._setCategoryValid(!0);var c=a.detail.value.data,d=this._promiseStatus={promise:c,obsolete:!1};c.defer.finally(function(){d.obsolete||b._setLoadRequested(!0)}),c.then(function(a){d.obsolete||(b._setData(a),b._setLoaded(!0))},function(){d.obsolete||b._setFailed(!0)})}}},{key:'_requestLoad',value:function(){this._promiseStatus.promise.run()}},{key:'_initFuse',value:function(a){return new Fuse(a.map(function(a,b){var c=babelHelpers.slicedToArray(a,2),d=c[0],e=c[1];return{description:d,name:e.name,url:e.url,index:b}}),{shouldSort:!0,includeScore:!0,threshold:0.6,location:0,distance:100,maxPatternLength:32,minMatchCharLength:1,keys:['description','name']})}},{key:'_fastSearch',value:function(a,b){return a.list.filter(function(c){return b.split(' ').some(function(b){return a.options.keys.some(function(a){return c[a]&&c[a].includes(b)})})}).map(function(a){return{item:a}})}},{key:'_fullSearch',value:function(a,b){return a.search(b)}},{key:'_searchKeyDown',value:function(a){13===a.keyCode&&(this._doSearch(this._fuse,this.searchQuery,!0),a.preventDefault())}},{key:'_doSearch',value:function(a,b){var c=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(a&&b)if(this._searchStatus&&(this._searchStatus.obsolete=!0,this._searchStatus.fullSearchTimeout&&window.clearTimeout(this._searchStatus.fullSearchTimeout)),a&&b){this.setProperties({fullSearchDone:!1,fastSearchDone:!1,searchInitiated:!0},!0);var d=this._searchStatus={obsolete:!1},e=async function(a,b,c){var e=a._fullSearch(b,c);d.obsolete||Polymer.RenderStatus.afterNextRender(a,function(){d.obsolete||this.setProperties({results:e,fullSearchDone:!0},!0)})},f=async function(a,b,c){var f=a._fastSearch(b,c);d.obsolete||(Polymer.RenderStatus.afterNextRender(a,function(){d.obsolete||this.setProperties({results:f,fastSearchDone:!0},!0)}),d.fullSearchTimeout=window.setTimeout(function(){d.obsolete||e(a,b,c)},700))};c?e(this,a,b):f(this,a,b)}else this.setProperties({fullSearchDone:!1,fastSearchDone:!1,searchInitiated:!1})}},{key:'_formatScore',value:function(a){return Math.round(100*a)+'%'}},{key:'_formattedDesc',value:function(a){if(a&&a.item&&a.item.description){var b=a.item.description;return this.searchQuery.split(' ').forEach(function(a){b=b.replace(a,'<mark>'+a+'</mark>')}),b}return'No description available'}},{key:'limit',value:function(a,b){return a&&b?a.slice(0,b):a}},{key:'_clog',value:function(a){console.log(a),a&&a.data&&console.log('->',a.data)}}],[{key:'is',get:function(){return'my-search'}},{key:'properties',get:function(){return{_fetchAllTemaDescription:{type:Object,value:function(){var a=fetchAllTemaDescription;return a.estimate='60 requests, 40KB',a}},_fetchAllFeladatDescription:{type:Object,value:function(){var a=fetchAllFeladatDescription;return a.estimate='1700 requests, 1.7MB',a}},_fetchAllMintafeladatDescription:{type:Object,value:function(){var a=fetchAllMintafeladatDescription;return a.estimate='60 requests, 80KB',a}},categoryValid:{type:Boolean,value:!1,notify:!0,readOnly:!0},_categoryInvalid:{type:Boolean,notify:!0,computed:'not(categoryValid)'},loadRequested:{type:Boolean,value:!1,notify:!0,readOnly:!0},_loadNotRequestedYet:{type:Boolean,notify:!0,computed:'not(loadRequested)'},loaded:{type:Boolean,value:!1,notify:!0,readOnly:!0},_notLoadedYet:{type:Boolean,notify:!0,computed:'not(loaded)'},failed:{type:Boolean,value:!1,notify:!0,readOnly:!0},_notFailedYet:{type:Boolean,notify:!0,computed:'not(failed)'},loading:{type:Boolean,computed:'and(loadRequested, _notLoadedYet, _notFailedYet)',notify:!0},data:{type:Array,value:[],notify:!0,readOnly:!0},_fuse:{type:Object,notify:!0,computed:'_initFuse(data)'},searchQuery:{type:String,notify:!0},results:{type:Array,notify:!0,readOnly:!0},resultLimit:{type:Number,notify:!0,value:function(){return preferences.searchLimit}},_results:{type:Array,notify:!0,computed:'limit(results, resultLimit)'},fastSearchDone:{type:Boolean,value:!1,notify:!0,readOnly:!0},fullSearchDone:{type:Boolean,value:!1,notify:!0,readOnly:!0},_noFullSearchDoneYet:{type:Boolean,notify:!0,computed:'not(fullSearchDone)'},searchInitiated:{type:Boolean,value:!1,notify:!0,readOnly:!0},resultsIncomplete:{type:Boolean,notify:!0,computed:'and(searchInitiated, _noFullSearchDoneYet)'}}}},{key:'observers',get:function(){return['_doSearch(_fuse, searchQuery)']}}]),b}(UdeS.LogicalOperatorsMixin(Polymer.Element));window.customElements.define(MySearch.is,MySearch);</script></dom-module></body></html>