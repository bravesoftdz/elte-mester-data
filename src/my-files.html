<html><head></head><body><dom-module id="my-files"><template><style include="shared-styles">:host{display:block;padding:10px 20px;}#hashTableLengthDiv{margin:1em 0;}#hashTableLengthDiv > paper-slider{width:100%;}#infoDiv{margin-top:1cm;}#infoDiv > iron-icon{position:absolute;}#infoDiv > p{padding-left:2em;text-align:justify;}</style><div class="card">Amennyiben kapott egy "gyorslinket" (pl. <code>d41d8cd98f00b204e9800998ecf8427e</code> vagy <code>Húsvét/minta.zip</code>), azt ide beillesztheti:<paper-input label="Link" value="{{link}}"></paper-input><template is="dom-if" if="[[url]]"><a target="_blank" href$="[[url]]"><paper-button><iron-icon icon="file-download"></iron-icon>Letöltés</paper-button></a></template><paper-spinner active="[[loading]]"></paper-spinner></div><template is="dom-if" if="[[hashTables]]"><div class="card"><h1>Gyorslink készítése</h1><paper-dropdown-menu label="Típus" selected-item="{{_hashTableSelection}}"><paper-listbox slot="dropdown-content"><template is="dom-repeat" items="[[hashTables]]" filter="_reversable"><paper-item data="[[item]]">[[item.name]]</paper-item></template></paper-listbox></paper-dropdown-menu><template is="dom-if" if="[[hashTable]]"><div id="hashTableLengthDiv">Hash hossza:<paper-slider immediate-value="{{hashTable.length}}" value="{{hashTable.length}}" min="1" max="[[hashTable.maxLength]]" editable=""></paper-slider></div><template is="dom-if" if="[[reverseUpdateFailed]]"><div id="errorDiv"><iron-icon icon="error"></iron-icon>A megadott beállításokkal létrehozott hash másik fájlra mutatna</div></template></template><template is="dom-if" if="[[_showInfoNeeded]]"><div id="infoDiv"><iron-icon icon="info-outline"></iron-icon><p>Gyorslinkként használható egy fájl elérési útjának a vége, vagy a tartalmának checksumja. Checksum esetén, a githez hasonlóan, elég csak annak a kezdetét megadni.</p><p>Először adja meg a fájl elérési útját, mint linket, majd itt generáljon helyette egy rövidebbet</p></div></template></div></template></template><script>var HashTable=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this.file=b,this.data=c.split('\n').map(function(a){var b=a.indexOf(' ');return{key:a.slice(0,b),value:a.slice(b+2)}})}return babelHelpers.createClass(a,[{key:'get',value:function(a){for(var b,c=0;c<this.data.length;c++)if(b=this.data[c],b.key.startsWith(a))return b.value;return null}},{key:'encode',value:function(a){for(var b,c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Infinity,d=0;d<this.data.length;d++)if(b=this.data[d],b.value===a)return b.key.slice(0,c);return null}}],[{key:'fetch',value:async function(b,c,d,e){var f=await readFile([b]),g=new a(b,f);return g.name=c,g.maxLength=d,g.length=e?e:d,g}}]),a}(),FileListTable=function(){function a(b,c){babelHelpers.classCallCheck(this,a),this.file=b,this.data=c.split('\n')}return babelHelpers.createClass(a,[{key:'get',value:function(a){for(var b,c=0;c<this.data.length;c++)if(b=this.data[c],b.endsWith(a))return b;return null}}],[{key:'fetch',value:async function(b){var c=await readFile([b]);return new a(b,c)}}]),a}(),MyFiles=function(a){function b(){babelHelpers.classCallCheck(this,b);var a=babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return Promise.all([HashTable.fetch('MD5SUMS','MD5',32),HashTable.fetch('SHA1SUMS','SHA',40,7),HashTable.fetch('SHA256SUMS','SHA256',64,16),HashTable.fetch('WHIRLPOOLSUMS','Whirlpool',128,32),HashTable.fetch('TIGERSUMS','Tiger',48,16),FileListTable.fetch('files.list')]).then(function(b){return a._setHashTables(b)}),a}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,null,[{key:'is',get:function(){return'my-files'}},{key:'properties',get:function(){return{link:{type:String,notify:!0,observer:'_linkChange'},route:{type:String,notify:!0,observer:'_routeChange'},hashTables:{type:Array,notify:!0,readOnly:!0},path:{type:String,notify:!0,computed:'_computePath(link, hashTables)',observer:'_pathChange'},url:{type:Object,notify:!0,readOnly:!0},_hashTableSelection:{type:Object,notify:!0},hashTable:{type:Object,notify:!0,computed:'_computeHashTable(_hashTableSelection)'},loading:{type:Boolean,notify:!0,readOnly:!0},reverseUpdateFailed:{type:Boolean,notify:!0,readOnly:!0},_showInfoNeeded:{type:Boolean,notify:!0,value:!0,computed:'_computeShowInfoNeeded(hashTable)'}}}},{key:'observers',get:function(){return['_reverseUpdateLink(path, hashTable, hashTable.length)']}}]),babelHelpers.createClass(b,[{key:'_routeChange',value:function(a){void 0!==a&&(this.link=/(?:\/)?(.*)/.exec(a.path)[1])}},{key:'_linkChange',value:function(a){void 0!==a&&(this.route={path:'/'+a})}},{key:'_computePath',value:function(a,b){if(a&&b)for(var c,d=0;d<b.length;d++)if(c=b[d].get(a),null!==c)return c}},{key:'_pathChange',value:function(a){var b=this;if(a){this._setLoading(!0),this._pathStatus&&(this._pathStatus.obsolete=!0);var c=this._pathStatus={obsolete:!1};Thing.fetchFile(a).then(function(a){if(c.obsolete)throw new Error('Timed out');return a.blob()}).then(function(a){if(c.obsolete)throw new Error('Timed out');Polymer.RenderStatus.afterNextRender(b,function(){b._setUrl(URL.createObjectURL(a)),b._setLoading(!1)})})}}},{key:'_reversable',value:function(a){return void 0!==a.encode}},{key:'_computeHashTable',value:function(a){if(a)return a.data}},{key:'_reverseUpdateLink',value:function(a,b,c){if(a&&b&&c){var d=b.encode(a,c);d&&(this._computePath(d,this.hashTables)===a?(this.link=d,this._setReverseUpdateFailed(!1)):this._setReverseUpdateFailed(!0))}}},{key:'_computeShowInfoNeeded',value:function(a){return!a}}]),b}(Polymer.Element);window.customElements.define(MyFiles.is,MyFiles);</script></dom-module></body></html>